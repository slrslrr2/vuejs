### 7.í† í°ì„ ì´ìš©í•œ APIì¸ì¦ì²˜ë¦¬(axios-interceptor)

ğŸ‘‰You can intercept **requests or responses before** they are handled by then or catch.

**ğŸ‘‰Â ì‚¬ìš©ë²•**

```jsx
// Add a request interceptor
axios.interceptors.request.use(function (config) {
    // Do something before request is sent
    return config;
  }, function (error) {
    // Do something with request error
    return Promise.reject(error);
  });

// Add a response interceptor
axios.interceptors.response.use(function (response) {
    // Any status code that lie within the range of 2xx cause this function to trigger
    // Do something with response data
    return response;
  }, function (error) {
    // Any status codes that falls outside the range of 2xx cause this function to trigger
    // Do something with response error
    return Promise.reject(error);
  });
```

ğŸ‘‰Â ì˜ˆì œ

request, response ìš”ì²­ ì „ì— ì‚¬ìš©ë˜ëŠ” axiosì˜ ìš”ì²­ì— interceptorë¥¼ ì¶”ê°€í•œë‹¤.

```jsx
// src/api/index.js

import axios from 'axios';
import { setInterceptors } from './common/interceptors';

function createInstance() {
  // ì•„ë˜ ë‚´ìš©ì€ ë°ì´í„°ë¥¼ ìš”ì²­í•  ë•Œë§ˆë‹¤, ì•„ë˜ ê°’ë“¤ì´ ë¶™ì–´ ìš”ì²­ëœë‹¤.
  const instance = axios.create({
    baseURL: process.env.VUE_APP_API_URL,
  });
  return setInterceptors(instance);
}

const instance = createInstance();

function registerUser(userData) {
  return instance.post('signup', userData);
}

function loginUser(userData) {
  return instance.post('login', userData);
}

export { registerUser, loginUser };

```

instance = axios.createë¥¼ ë°›ì•„ intercpetorë¥¼ ì¶”ê°€í•´ì¤€ë‹¤

ìš”ì²­ì˜ configë¥¼ ë°›ì•„ header-Authorizationì— tokenì¶”ê°€í•˜ê¸°

```jsx
import store from '@/store/index';

function setInterceptors(instance) {
  instance.interceptors.request.use(
    function(config) {
			// ìš”ì²­ì˜ configë¥¼ ë°›ì•„ header-Authorizationì— tokenì¶”ê°€í•˜ê¸°
      config.headers.Authorization = store.state.token;
      return config;
    },
    function(error) {
      return Promise.reject(error);
    },
  );

  instance.interceptors.response.use(
    function(response) {
      return response;
    },
    function(error) {
      return Promise.reject(error);
    },
  );

  return instance;
}

export { setInterceptors };
```
