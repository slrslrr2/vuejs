# 6.ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬ì™€ ìŠ¤í† ì–´

ğŸ‘‰Â í˜ì´ì§€ ì´ë™

```jsx
this.$router.push('/main') //jsì—ì„œ ì´ë™
<router-link to=""> // templateì—ì„œ ì´ë™
```

ğŸ‘‰Â LoginForm.vueì—ì„œ AppHeaderë¡œ ì´ë²¤íŠ¸ ë³´ë‚´ëŠ” ë°©ë²•

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/372e8be7-db74-43e4-a094-42f4c3e53800/Untitled.png)

1. vue Componentë¥¼ í†µí•´ ì „ë‹¬
    1. 
    
    ```jsx
    <template>
    	<ul>
    		<PostListItem
    		  v-for="postItem in postItems"
    		  :key="postItem._id"
    		  :postItem="postItem"
    		>
    		</PostListItem>
    	</ul>
    </template>
    <script>
    	import PostListItem from '@/components/posts/PostListItem.vue';
    	import { fetchPosts } from '@/api/index';
    	export default {
    	  components: {
    	    PostListItem,
    	  },
    	  data() {
    	    return {
    	      postItems: [],
    	    };
    	  },
    	  methods: {
    	    async fetchData() {
    	      const { data } = await fetchPosts();
    	      this.postItems = data.posts;
    	    },
    	  },
    	  created() {
    	    this.fetchData();
    	  },
    	};
    </script>
    ```
    
    ```jsx
    <template>
      <li>
        <div class="post-title">{{ postItem.title }}</div>
        <div class="post-contents">{{ postItem.contents }}</div>
        <div class="post-time">{{ postItem.createdAt }}</div>
      </li>
    </template>
    
    <script>
    export default {
      props: {
        postItem: {
          type: Object,
          required: true,
        },
      },
    };
    </script>
    ```
    
2. ì´ë²¤íŠ¸ ë²„ìŠ¤ ì´ìš©
    
    ê°€. ì„¤ëª…: ìì‹(PostListItem.vue)ì—ì„œ **ì‚­ì œë©”ì„œë“œê°€** ì‹¤í–‰ë˜ë©´ **$emit(â€™refreshâ€™) ë¥¼** í†µí•´ ë¶€ëª¨Componentì—ê²Œ ì „ë‹¬í•œë‹¤.
    
    ```
    this.$emit('refresh');
    ```
    
    ë‚˜. ë¶€ëª¨(MainPage)ì—ì„œ \@refeshë¥¼ ë°›ì•„ fetchDataë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.
    
    ```jsx
    <PostListItem
      @refresh="fetchData" //refreshë¥¼ ë°›ì•„
    ></PostListItem>
    ```
    

**PostListItem.vue(ìì‹)**

```jsx
<template>
  <li>
    <div class="post-title">
      {{ postItem.title }}
    </div>
    <div class="post-contents">
      {{ postItem.contents }}
    </div>
    <div class="post-time">
      {{ postItem.createdAt }}
      <i class="icon ion-md-create"></i>
      <i class="icon ion-md-trash" @click="deleteItem"></i>
    </div>
  </li>
</template>

<script>
import { deletePost } from '@/api/posts';
export default {
  props: {
    postItem: {
      type: Object,
      required: true,
    },
  },
  methods: {
    async deleteItem() {
      if (confirm('You want to delete it?')) {
        const respose = await deletePost(this.postItem._id);
        if (respose.status == '200') {
          this.$emit('refresh');
        }
      }
    },
  },
};
</script>
```

**MainPage.vue(ë¶€ëª¨)**

```jsx
<template>
  <div>
    <div class="main list-container contents">
      <h1 class="page-header">Today I Learned</h1>
      <LoadingSpinner v-if="isLoading"></LoadingSpinner>
      <ul v-else>
        <PostListItem
          v-for="postItem in postItems"
          :key="postItem._id"
          :postItem="postItem"
          @refresh="fetchData"
        ></PostListItem>
      </ul>
    </div>
    <router-link to="/add" class="create-button">
      <i class="icon ion-md-add"></i>
    </router-link>
  </div>
</template>

<script>
import PostListItem from '@/components/posts/PostListItem.vue';
import LoadingSpinner from '@/components/common/LoadingSpinner.vue';
import { fetchPosts } from '@/api/posts';

export default {
  components: {
    PostListItem,
    LoadingSpinner,
  },
  data() {
    return {
      postItems: [],
      isLoading: true,
    };
  },
  methods: {
    async fetchData() {
      this.isLoading = true;
      const { data } = await fetchPosts();
      this.isLoading = false;
      this.postItems = data.posts;
    },
  },
  created() {
    this.fetchData();
  },
};
</script>

<style></style>
```

1. Storeì— ì €ì¥í•˜ì—¬ AppHeaderì—ì„œ êº¼ë‚´ê¸° ** 
    1. vuexë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.
        
        ```jsx
        npm install vuex@3.1.2
        ```
        

ğŸ‘‰Â Vuexì˜ LifeCycleVuexì— root, stateì— í•´ë‹¹ ë°ì´í„°ë“¤ì´ ë°˜ì˜ë˜ì–´ìˆ

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7257a89d-3124-4902-9874-dd683d128e48/Untitled.png)

![Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/838e488f-5995-4ef3-8727-e40a46c3cfcc/Untitled.png)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0fd53872-a811-4328-bdd0-c270eb303eb1/Untitled.png)

[eventBus ì˜ˆì œ](https://www.notion.so/eventBus-31d8458e9e7d46c4ae8ed8f9da5b8d94)
