# 3. ì‡¼í•‘ ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ì™€ ìƒì„¸ í˜ì´ì§€ ê°œë°œ

**ğŸ‘‰Â Listë¡œ ë˜ì–´ìˆëŠ” ë°ì´í„° ê°€ê³µí•˜ê¸° map**

```jsx
export default {
  components: {
    // ProductList,
  },
  async asyncData() {
    const { data } = await axios.get('http://localhost:3000/products');
    const products = data;
    return { products };
  },
};
```

axios.getìœ¼ë¡œ ë°›ì•„ì˜¨ ë°ì´í„°ëŠ” ì•„ë˜ì™€ê°™ë‹¤.

```jsx
[
  {
    id: 0,
    name: 'Refined Fresh Chicken',
    price: '209.00',
    imageUrl: 'http://placeimg.com/640/480/fashion'
  },
  {
    id: 1,
    name: 'Intelligent Metal Mouse',
    price: '84.00',
    imageUrl: 'http://placeimg.com/640/480/fashion'
  },
  {
    id: 2,
    name: 'Handcrafted Frozen Pizza',
    price: '315.00',
    imageUrl: 'http://placeimg.com/640/480/fashion'
  },
  {       ... ìƒëµ ...
```

ìì„¸íˆ ë³´ë©´ product.imageUrlì˜ ë°ì´í„°ê°€ ê°™ë‹¤.

í•´ë‹¹ URLì€ ìƒˆë¡œê³ ì¹¨í• ë•Œë§ˆë‹¤ ê°™ì€ URLì„ ë¶ˆëŸ¬ì˜¨ë‹¤. ê·¸ë ‡ê¸°ì— ë’¤ì— randomì´ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë„£ì–´ì„œ ë§¤ë²ˆ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ë„ë¡ í•˜ì

ì´ë•Œ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ mapì´ë‹¤.

```jsx
async asyncData() {
  const { data } = await axios.get('http://localhost:3000/products');
  const products = data.map(item => { // mapì„ ì‚¬ìš©í•˜ì—¬
    return {
      ...item, // ê°ê°ì˜ ë°ì´í„°ë¥¼ key, mapí˜•ì‹ìœ¼ë¡œ ë°›ê³ 
      imageUrl: `${item.imageUrl}?random=${Math.random()}`, // imageUrlì˜ valueë¥¼ ê°€ê³µí•œë‹¤.
    };
  });
  return { products };
},
```

ğŸ‘‰Â ë™ì  í˜ì´ì§€

ì•„ë˜ì™€ ê°™ì´  /post/ì•„ì´ë””ê°’ ì„ ë„£ì–´ ë™ì ìœ¼ë¡œ ì´ë™ í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤

```jsx
	methods: {
		async routeEditPage() {
		  this.$router.push(`/post/${this.postItem._id}`);
		},
	}
```

nuxtê°€ ì•„ë‹Œ **vueë§Œ ì‚¬ìš©**í–ˆì„ ê²½ìš° 

ë™ì í˜ì´ì§€ì˜ routerëŠ” ì•„ë˜ì™€ ê°™ì´ pathì— **:id**ë¥¼ ë„£ì–´ ë™ì  Parameterë¥¼ ë°›ë„ë¡ ì ìš©í•˜ì˜€ë‹¤.

```jsx
// /src/routes/index.js
{
  path: '/post/:id',
  component: () => import('@/views/PostEditPage.vue'),
},
```

ë˜í•œ í•´ë‹¹ í˜ì´ì§€ì—ì„œëŠ” ë°ì´í„°ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°›ë„ë¡ í•˜ì˜€ë‹¤

```jsx
export default {
  data() {
    return {
      id: this.$route.params.id,
		}
	}
}
```

ê·¸ëŸ¼ routerë¥¼ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì£¼ëŠ” nuxtì—ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

**_id.vue** ë¡œ ì„¤ì •ì„ í•´ì•¼ URLì˜ Parameterë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

![15](https://user-images.githubusercontent.com/58017318/200573517-81179406-e863-4c80-89b1-c97c2c6ec325.png)

ê·¸ë¦¬ê³  _id.vueí˜ì´ì§€ì—ì„œ í•´ë‹¹ paramì„ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

ì´ ë•Œ, ayncDataë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì´ëŠ” thisë¼ëŠ” ê°ì²´ì— ì ‘ê·¼ì„ ëª»í•˜ê¸°ì— this.$route.paramì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤. 

ëŒ€ì‹  asyncData({param})ì´ë¼ëŠ” ì†ì„±ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```jsx
import { fetchProductById } from '@/api/index';
export default {
  // asyncData({isDev, route, store, env, params, query, req, res, redirect, error}) {
  // },
  async asyncData({ params }) {
    const response = await fetchProductById(params.id);
    const product = response.data;
    return { product };
  },
};
```

asyncDataëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜ì˜¤ê¸°ë„ ì „ì— ì„œë²„ì—ì„œ ë¿Œë ¤ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ ì „ë°˜ì— ê±¸ì³ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì†ì„±ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì„ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°í•˜ì

[Data Fetching | Cracking Vue.js](https://joshua1988.github.io/vue-camp/nuxt/data-fetching.html#asyncdata%E1%84%8B%E1%85%B4-%E1%84%91%E1%85%A1%E1%84%85%E1%85%A1%E1%84%86%E1%85%B5%E1%84%90%E1%85%A5)

**ğŸ‘‰Â _id.vue í˜ì´ì§€ ì†ŒìŠ¤**

```jsx
<template>
  <div>
    <div class="container">
      <div class="main-panel">
        <img
          class="product-image"
          :src="product.imageUrl"
          :alt="product.name"
        />
      </div>
      <div class="side-panel">
        <p class="name">{{ product.name }}</p>
        <p class="price">{{ product.price }}</p>
        <button type="button" @click="addToCart">Add to Cart</button>
      </div>
    </div>
  </div>
</template>

<script>
import { fetchProductById } from '@/api/index';
export default {
  async asyncData({ params }) {
    const response = await fetchProductById(params.id);
    const product = response.data;
    return { product };
  },
};
</script>
```

ğŸ‘‰Â api/index.js 

```jsx
function fetchProductsByKeyword(keyword) {
  return instance.get(`/products`, {
    params: {
      name_like: keyword,
    },
  });
  /*return instance.get(`/products/name_like=${keyword}`);*/
}
```

- paramsë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ìœ¼ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§í•˜ì—¬ ë‚˜ê°„ë‹¤

ğŸ‘‰Â asyncDate()ë¥¼ í†µí•´ return ëœ ë°ì´í„°ëŠ” methodsì—ì„œ this.returnë°ì´í„°ëª…ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤

```jsx
async asyncData() {
  const { data } = await axios.get('http://localhost:3000/products');
  const products = data.map(item => {
    return {
      ...item,
      imageUrl: `${item.imageUrl}?random=${Math.random()}`,
    };
  });
  return { products };
},
data() {
  return {
    searchKeyword: '',
  };
},
```

ë¹„ë¡ dataì— **productsëŠ” ì •ì˜ë˜ì–´ìˆì§€ì•Šì§€ë§Œ** 

**asyncData**ì—ì„œ return í•˜ë©´ dataì— ì •ì˜ë˜ê¸°ì— 

**this.products**ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤
